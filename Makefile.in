# $Id: Makefile.in,v 1.7 2000/08/14 01:07:53 leonard Exp $

PYTHON=		@PYTHON@
LIBDEST=	@LIBDEST@
INSTALL=	$(LIBDEST)/config/install-sh
INSTALL_DATA=	$(INSTALL) -m 644
INSTALL_DIR=	mkdir -p
srcdir=		@srcdir@

MAKEVARS=	srcdir=$(srcdir)/Modules VPATH=$(srcdir)/Modules

build:   _ldapmodule-build
install: _ldapmodule-install

_ldapmodule-build:
	cd Modules && $(MAKE) $(MAKEVARS)

_ldapmodule-install:
	cd Modules && $(MAKE) $(MAKEVARS) install
	$(INSTALL_DIR) $(DESTDIR)$(LIBDEST)/site-packages/python-ldap
	$(INSTALL_DATA) $(srcdir)/Misc/ldap.pth \
		$(DESTDIR)$(LIBDEST)/site-packages/ldap.pth
	#-- XXX need to copy contents of $(srcdir)/Lib/* to the new directory
	$(PYTHON) $(LIBDEST)/compileall.py \
		$(DESTDIR)$(LIBDEST)/site-packages/python-ldap

